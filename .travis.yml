language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: hVwicctG1Q/fjhvPMDb7fafkV0SUH9QiQYzeezcUsOdd+52jSxIlLKsd4CyzuPst4Q/FJSDNmn7ZsQNyipQmHJmkGH3f3XCPP5eiCBpFyUhfQaW6gSUlxKAr385I2cWegjPN0sI8iXf7g540+YwxHkkbtdfuqd7MofpIEPDXHGLfM4Mv8K+os5x+VIHfeZisWQJyGBC9HbIsLNgZa5axXyGJge0xpOr3DgO8RfAVDYxOlhEoTP2xX83BD/c2XQPlnL6xEdxnnRSFr9l6i/8ShNVEo02JrHbDdUMRUi3y19f4bnEKeLSWwlqOkZiYb3c2oMJLS+mM7KBc+t3g11j6eFEyN4gPX5y0W9v673gCmtnpAR3LQ6gaMnSYZt8H5UpHAAk5FEQxVwY1HF4R7L506pSvARcrkDhyOrfkHySjIbOIrH4Nti1yH+MRCJ4yaxTPdmajw4KboXtULFCC2i6IfWHv0rDQoRSRLmLNfahfuKx/vJkwLlMSoCfVm1V8+e95LT1g611TwfQeeafraY+yTk78NPGBe7sKH+epZ+s7BQGY3ogR++cp49jEszDLDHVkE/s6IWCdzOQVX2Rli/JGQOBl1K+n0TdqRK9/WyfMev4MslXtqctiKaxOWzVGVQabMp1OxUAgarshpAOW0FqMIiAtNxN5Nef1BCLTGVmNPZY=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
